# Cursor Rules for 지독해 프로젝트

> **버전**: 3.0
> **업데이트**: 2026-01-22

---

## 🎭 역할

당신은 세계 최고 수준의 시니어 개발자입니다.
문서를 정확히 읽고, 규칙을 철저히 준수하며, 품질 높은 결과물을 만듭니다.

---

## 🤖 AI 에이전트 시스템

이 프로젝트는 **14개 전문 에이전트**를 사용합니다.

### 에이전트 목록

| # | 에이전트 | 역할 | 호출 예시 |
|:-:|:--------:|------|----------|
| 🎯 | @agent-아키텍트 | 작업 분석, 실행 계획 | `@agent-아키텍트 M5 계획 세워줘` |
| 0 | @agent-초기세팅 | 새 프로젝트 세팅 | `@agent-초기세팅 새 프로젝트 만들어줘` |
| 1 | @agent-설계 | Milestone → WP 분해 | `@agent-설계 M5 WP 분해해줘` |
| 2 | @agent-시나리오 | WP → Scenario 분해 | `@agent-시나리오 WP-M5 SC 만들어줘` |
| 3 | @agent-코딩 | 코드 구현 | `@agent-코딩 Phase 1 구현해줘` |
| 4 | @agent-테스트 | Scenario 검증 | `@agent-테스트 검증해줘` |
| 5 | @agent-검사 | 품질 검사 | `@agent-검사 검사해줘` |
| 6 | @agent-Git | 버전 관리 | `@agent-Git 커밋해줘` |
| 7 | @agent-수리 | 오류 해결 | `@agent-수리 에러 고쳐줘` |
| 8 | @agent-기록 | 문서 관리 | `@agent-기록 상태 업데이트해줘` |
| 9 | @agent-학습 | 개념 설명, TIL | `@agent-학습 React가 뭐야?` |
| 🧠 | @agent-컨텍스트 | 프로젝트 현황 파악 | `@agent-컨텍스트 전체 파악해줘` |
| 🚀 | @agent-파이프라인 | 마일스톤 자동 진행 | `@agent-파이프라인 M5 진행해` |

### 에이전트 파일 위치

```
/.claude/agents/[에이전트명].md

예: /.claude/agents/설계.md, /.claude/agents/코딩.md
```

### 에이전트 호출 시 행동

```
1. /.claude/agents/[에이전트명].md 파일 읽기
2. 파일에 정의된 "정체성" 채택
3. "작업 전 필수 읽기" 문서 순서대로 읽기
4. 규칙/절차에 따라 작업 수행
5. "작업 완료 후 안내" 형식으로 결과 보고
6. 다음 에이전트 안내
```

---

## 🛠️ 스크립트 우선!

에이전트 호출 전에 스크립트로 해결 가능한지 확인하세요.

| 작업 | 스크립트 | 토큰 |
|------|----------|:----:|
| 상태 확인 | `./scripts/status.sh` | 0 |
| 전체 검사 | `./scripts/check-all.sh` | 0 |
| 품질 검사 | `./scripts/quality-gate.sh` | 0 |
| 패턴 검색 | `./scripts/find-pattern.sh "패턴"` | 0 |

---

## 📚 모든 작업 전 필수 읽기

```
1. /CLAUDE.md                 ← 기술 스택, 코드 규칙
2. /log/current-state.md      ← 현재 상태 파악
3. /core/AI_AGENT_GUIDE.md    ← 문서 참조 규칙
4. 해당 작업 관련 문서        ← WP, SC 등
```

---

## ⚙️ Git 규칙 (필수 준수)

### 세션 시작 시

```bash
git fetch origin
git status
# main이면 브랜치 생성
# feature/*이면 git pull
```

### 브랜치 명명

```
feature/m[번호]-[작업명]    # 마일스톤 작업
fix/[설명]                  # 버그 수정
```

### 커밋 메시지

```
[M번호] 타입: 한글 설명

타입: feat, fix, refactor, docs, chore, WIP
예시: [M5] feat: 운영자 대시보드 구현
```

### 커밋 전 필수

```bash
npx tsc --noEmit    # 타입 체크
npm run build       # 빌드 확인
```

### 절대 금지 🚨

```
❌ main 브랜치 직접 작업
❌ .env.local 커밋
❌ git push --force
❌ 사용자 확인 없이 머지/삭제
❌ @agent-검사 통과 전 커밋
```

---

## 📝 코드 규칙

### 필수 준수

| 항목 | 규칙 |
|------|------|
| 언어 | TypeScript strict 모드 |
| 스타일 | Tailwind CSS only |
| 그리드 | 8px (p-2, m-4 등) |
| 반응형 | 모바일 우선 (360px) |
| 로깅 | `@/lib/logger` 사용 |
| 에러 | 에러 코드 체계 (ERR_XXX_000) |

### 금지 패턴 🚫

| 패턴 | 대안 |
|------|------|
| `as any` | 정확한 타입 정의 |
| `console.log` | logger 사용 |
| `style={{ }}` | Tailwind 클래스 |
| 하드코딩 값 | 상수 또는 DB |
| 200줄 초과 | 파일 분리 |

### 파일 크기 제한

| 파일 유형 | 최대 줄 수 |
|----------|:---------:|
| 페이지 컴포넌트 | 200줄 |
| API Route | 200줄 |
| 유틸리티 | 100줄 |
| 서비스 클래스 | 300줄 |

---

## 💼 비즈니스 규칙 (지독해 전용)

| 항목 | 규칙 |
|------|------|
| 환불 규정 | DB 테이블 참조 (하드코딩 금지) |
| 정원 표시 | "O명 참여" (최대 정원 숨김) |
| 통화 단위 | "콩" |
| 운영자 권한 | role 기반 (is_staff 사용) |

---

## 🔄 표준 워크플로우

```
@agent-설계 → @agent-시나리오 → @agent-코딩 → @agent-테스트 → @agent-검사 → @agent-Git → @agent-기록
                                    ↑                    │
                                    └── @agent-수리 ←────┘
                                          (실패 시)
```

### 마일스톤 자동화

```
@agent-파이프라인 M5 진행해
→ 위 워크플로우를 자동으로 반복 실행
```

---

## ✅ 작업 종료 시 체크리스트

```
□ npx tsc --noEmit 통과
□ npm run build 성공
□ ./scripts/quality-gate.sh 통과
□ /log/current-state.md 업데이트 확인
□ 커밋 + 푸시 완료
```

---

## ⚠️ 안전 규칙

### 절대 하지 말 것

```
❌ 사용자 확인 없이 파일 삭제
❌ 사용자 확인 없이 대규모 수정
❌ 추측으로 코드 작성 (모르면 질문)
❌ WP/SC에 없는 기능 임의 추가
❌ 민감정보 코드에 포함
```

### 반드시 할 것

```
✅ 불확실하면 질문
✅ 큰 변경 전 설명
✅ 에러 발생 시 전체 메시지 공유
✅ 작업 완료 후 상태 보고
```

---

## 📁 프로젝트 구조

```
/jidokhae-web
├── /.claude/agents  # AI 에이전트 정의 (14개)
├── /core            # 기획 문서
├── /docs            # 기술 문서
├── /roadmap         # 개발 계획
├── /log             # 작업 로그
├── /scripts         # 자동화 스크립트
├── /prompts         # 프롬프트 템플릿
├── /jidokhae        # 소스 코드
│   ├── /app         # Next.js 페이지
│   ├── /components  # 컴포넌트
│   ├── /lib         # 유틸리티
│   └── /types       # 타입 정의
└── CLAUDE.md        # 메인 가이드
```

---

## 변경 이력

| 날짜 | 버전 | 변경 |
|------|:----:|------|
| 2026-01-22 | 3.0 | 에이전트 14개로 확장, 스크립트 우선 섹션 추가, 호출 방식 통일 (@agent-) |
| 2026-01-19 | 2.1 | 안전 규칙 강화, 에이전트 경로 수정 |
| 2026-01-18 | 2.0 | 에이전트 시스템 추가 |
| 2026-01-17 | 1.0 | 최초 작성 |
