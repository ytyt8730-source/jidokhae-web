@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== CSS Variables - Theme System v3.3 ===== */
:root {
  /* Electric Theme (Default) */
  --bg-base: #F8FAFC;
  --bg-surface: #FFFFFF;
  --primary: #0047FF;
  --accent: #CCFF00;
  --accent-readable: #0F172A;
  --text: #0F172A;
  --text-muted: #64748B;
  --border: #E2E8F0;
  --overlay: rgba(0, 0, 0, 0.5);

  /* Font Variables */
  --font-pretendard: 'Pretendard', system-ui, sans-serif;
  --font-noto-serif: 'Noto Serif KR', Georgia, serif;
  --font-noto-sans: 'Noto Sans KR', system-ui, sans-serif;
  --font-outfit: 'Outfit', system-ui, sans-serif;
}

[data-theme="warm"] {
  --bg-base: #F5F5F0;
  --bg-surface: #FAFAF7;
  --primary: #0F172A;
  --accent: #EA580C;
  --accent-readable: #FFFFFF;
  --text: #0F172A;
  --text-muted: #64748B;
  --border: #E7E5E4;
  --overlay: rgba(15, 23, 42, 0.6);
}

/* Warm 테마 Noise Texture */
[data-theme="warm"] body::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
  opacity: 0.06;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}

/* ===== Base Styles ===== */
@layer base {
  html {
    @apply scroll-smooth;
  }

  body {
    color: var(--text);
    background: var(--bg-base);
    font-family: var(--font-noto-sans), var(--font-pretendard), system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: -0.015em;
  }

  .font-serif {
    letter-spacing: -0.02em;
  }
}

/* ===== Typography Utilities ===== */
@layer utilities {
  /* Theme-Aware Heading Font
     - Electric Mode: Display (고딕체/Outfit)
     - Warm Mode: Serif (명조체/Noto Serif KR)
  */
  .heading-themed {
    @apply font-display;
  }
  [data-theme="warm"] .heading-themed {
    @apply font-serif;
  }

  /* Display - 히어로 섹션 메인 카피 */
  .text-display {
    @apply font-display text-[32px] font-bold leading-[1.3] tracking-tight;
    color: var(--text);
  }
  [data-theme="warm"] .text-display {
    @apply font-serif;
  }

  /* H1 - 페이지 제목 */
  .text-h1 {
    @apply font-display text-[24px] font-bold leading-[1.4] tracking-tight;
    color: var(--text);
  }
  [data-theme="warm"] .text-h1 {
    @apply font-serif;
  }

  /* H2 - 섹션 제목 */
  .text-h2 {
    @apply font-sans text-[20px] font-semibold leading-[1.4];
    color: var(--text);
  }

  /* H3 - 카드 제목, 소제목 */
  .text-h3 {
    @apply font-sans text-[17px] font-medium leading-[1.5];
    color: var(--text);
  }
  [data-theme="warm"] .text-h3 {
    @apply font-serif;
  }

  /* Body - 본문 */
  .text-body {
    @apply font-sans text-[15px] font-normal leading-[1.65];
    color: var(--text-muted);
  }

  /* Body Small - 보조 본문 */
  .text-body-sm {
    @apply font-sans text-[14px] font-normal leading-[1.6];
    color: var(--text-muted);
  }

  /* Caption - 메타 정보 */
  .text-caption {
    @apply font-sans text-[13px] font-normal leading-[1.5];
    color: var(--text-muted);
  }

  /* Caption Small - 뱃지, 라벨 */
  .text-caption-sm {
    @apply font-sans text-[12px] font-normal leading-[1.4];
    color: var(--text-muted);
  }

  /* 안전 영역 패딩 (모바일) */
  .safe-area-inset-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* ===== Hero Section (Theme-aware) ===== */
  /*
   * PRD v1.5 사양:
   * - Electric: Clean White (#F8FAFC) 배경 + 어두운 텍스트
   * - Warm: Warm Paper (#F5F5F0) 배경 + 어두운 텍스트
   * - 파란 그라데이션은 사용하지 않음 (촌스러움의 원인)
   */
  .hero-section {
    background-color: var(--bg-base);
  }
  .hero-section .hero-title {
    color: var(--text);
  }
  .hero-section .hero-subtitle {
    color: var(--text-muted);
  }
  .hero-section .hero-btn-primary {
    background-color: var(--primary);
    @apply text-white font-semibold;
    box-shadow: 0 2px 8px rgba(0, 71, 255, 0.25);
  }
  .hero-section .hero-btn-primary:hover {
    opacity: 0.9;
    transform: translateY(-1px);
  }
  .hero-section .hero-btn-secondary {
    @apply bg-transparent font-medium;
    color: var(--text);
    border: 1px solid var(--border);
  }
  .hero-section .hero-btn-secondary:hover {
    background-color: var(--bg-surface);
  }

  /* Warm Mode 오버라이드 (필요시) */
  [data-theme="warm"] .hero-section .hero-btn-primary {
    box-shadow: none;
  }
}

/* ===== Component Base Styles ===== */
@layer components {
  /* ===== Button ===== */
  .btn {
    @apply inline-flex items-center justify-center rounded-xl px-4 py-2.5 text-sm font-medium transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply font-semibold rounded-xl px-6 py-4;
    background-color: var(--primary);
    color: white;
    box-shadow: 0 2px 8px rgba(0, 71, 255, 0.25);
    @apply hover:-translate-y-[1px];
    @apply active:scale-[0.98] active:translate-y-0;
    @apply transition-all duration-200;
    @apply disabled:bg-gray-300 disabled:shadow-none disabled:cursor-not-allowed;
  }
  .btn-primary:hover {
    box-shadow: 0 4px 14px rgba(0, 71, 255, 0.35);
  }

  .btn-secondary {
    @apply font-medium rounded-xl px-6 py-4;
    background-color: var(--bg-surface);
    color: var(--text);
    border: 1px solid var(--border);
    @apply hover:bg-gray-50;
    @apply active:scale-[0.98];
    @apply transition-all duration-200;
  }

  .btn-ghost {
    @apply bg-transparent font-medium rounded-md px-4 py-2;
    color: var(--text-muted);
    @apply hover:bg-gray-100;
    @apply transition-all duration-150;
  }

  .btn-accent {
    @apply font-semibold rounded-xl px-6 py-4;
    background-color: var(--accent);
    color: var(--accent-readable);
    @apply hover:-translate-y-[1px];
    @apply active:scale-[0.98];
    @apply transition-all duration-200;
  }

  /* ===== Input ===== */
  .input {
    @apply w-full px-4 py-3.5 text-[15px] rounded-xl;
    background-color: var(--bg-base);
    color: var(--text);
    border: 1px solid transparent;
    @apply placeholder:text-gray-400;
    @apply transition-all duration-200;
    @apply focus:outline-none focus:bg-white focus:ring-2;
    @apply disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed;
  }
  .input:focus {
    border-color: var(--primary);
  }

  /* ===== Card ===== */
  .card {
    @apply rounded-2xl shadow-card;
    background-color: var(--bg-surface);
    @apply transition-all duration-300;
  }

  .card-base {
    @apply rounded-2xl p-6 shadow-card transition-all duration-300;
    background-color: var(--bg-surface);
  }

  .card-hoverable {
    @apply card-base cursor-pointer;
    @apply hover:-translate-y-1 hover:shadow-card-hover;
    @apply active:scale-[0.995];
  }

  /* ===== Badge ===== */
  .badge {
    @apply inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-md;
  }

  .badge-primary {
    background-color: var(--primary);
    color: white;
  }

  .badge-accent {
    background-color: var(--accent);
    color: var(--accent-readable);
  }

  .badge-success {
    @apply bg-green-50 text-success;
  }

  .badge-warning {
    @apply bg-amber-50 text-warning;
  }

  .badge-danger {
    @apply bg-red-50 text-danger;
  }

  .badge-muted {
    @apply bg-gray-100 text-gray-500;
  }

  /* ===== Section Label ===== */
  .section-label {
    @apply text-[10px] font-bold uppercase tracking-widest;
    color: var(--primary);
  }

  /* ===== Navigation Item ===== */
  .nav-item {
    @apply flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all;
    color: var(--text-muted);
  }
  .nav-item:hover {
    background-color: var(--bg-base);
    color: var(--text);
  }
  .nav-item.active {
    background-color: var(--bg-base);
    color: var(--primary);
  }

  /* ===== User Level Badge ===== */
  .user-level {
    @apply text-[10px] font-bold px-2 py-0.5 rounded-full;
    background-color: var(--accent);
    color: var(--accent-readable);
  }
}

/* ===== D-Day Card Theme Styles (Design System v3.3) ===== */
/* Electric Mode: accent 테두리 + 흰 배경 */
.dday-card {
  background-color: var(--bg-surface);
  border: 2px solid var(--accent);
}
.dday-label {
  color: var(--primary);
}
.dday-number {
  color: var(--text);
}
.dday-meeting-name {
  color: var(--text-muted);
}
.dday-text-muted {
  color: var(--text-muted);
}
.dday-link {
  color: var(--text);
}

/* Warm Mode: accent 배경 + 흰 텍스트 */
[data-theme="warm"] .dday-card {
  background-color: var(--accent);
  border: none;
  color: white;
}
[data-theme="warm"] .dday-label {
  color: rgba(255, 255, 255, 0.7);
}
[data-theme="warm"] .dday-number {
  color: white;
}
[data-theme="warm"] .dday-meeting-name {
  color: rgba(255, 255, 255, 0.8);
}
[data-theme="warm"] .dday-text-muted {
  color: rgba(255, 255, 255, 0.7);
}
[data-theme="warm"] .dday-link {
  color: white;
}

/* ===== Scrollbar ===== */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-muted);
}
