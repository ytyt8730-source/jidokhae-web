# Work Package: M6 - 신규 회원 & 출시 준비

---

**Milestone:** M6  
**목표:** 신규 회원 유입 경로 확보, 안정화 후 정식 출시  
**기간:** 2주  
**선행 조건:** M4, M5 완료  
**핵심 가치:** 모든 핵심 가치 완성  
**테스트:** Beta 완료 → 🎉 정식 출시

---

## 1. Work Package 개요

M6는 **4개의 Phase**로 구성됩니다. 각 Phase가 끝나면 "동작하는" 소프트웨어 상태가 됩니다.

```
Phase 1: 후킹 랜딩페이지
    ↓ [동작 확인: 브랜드 스토리 + 회원 후기 페이지 공개]
Phase 2: 신규 회원 플로우
    ↓ [동작 확인: 신규 회원 안내 팝업 + 환영 알림]
Phase 3: 자격 체크 & 유도
    ↓ [동작 확인: 정기모임 자격 미충족 시 유도]
Phase 4: 안정화 & 출시
    ↓ [동작 확인: 버그 수정, 최적화 → 정식 출시]
```

---

## 2. Phase 상세

### Phase 1: 후킹 랜딩페이지

**목표:** 신규 유입을 위한 매력적인 랜딩페이지

**예상 소요:** 3일

#### 작업 목록

| # | 작업 | 산출물 | 완료 기준 |
|---|------|--------|----------|
| 1.1 | 랜딩페이지 레이아웃 | `/app/about/page.tsx` | 기본 구조 |
| 1.2 | 브랜드 스토리 섹션 | UI | 지독해 소개 |
| 1.3 | 분위기 갤러리 | UI | 모임 사진/일러스트 |
| 1.4 | 회원 후기 섹션 | UI | 공개 동의 후기 |
| 1.5 | 공개 후기 조회 API | `/app/api/reviews/public/route.ts` | is_public = true |
| 1.6 | CTA 버튼 | UI | "지금 시작하기" |
| 1.7 | SEO 최적화 (SSR) | 메타데이터 | 검색 노출 |
| 1.8 | 반응형 디자인 | UI | 모바일 최적화 |
| 1.9 | 애니메이션 효과 | UI | 스크롤 인터랙션 |

#### 랜딩페이지 구조

```
┌─────────────────────────────────────────────────────────────┐
│                                                              │
│                    📚 지독해                                 │
│                                                              │
│           "책을 사랑하는 사람들이 모이는 곳"                   │
│                                                              │
│              [지금 시작하기] [일정 보러가기]                   │
│                                                              │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│                    💭 우리의 이야기                          │
│                                                              │
│  지독해는 책을 함께 읽고 이야기 나누는 독서 모임입니다.        │
│  2024년 시작되어 250명의 회원이 함께하고 있습니다.            │
│                                                              │
│  매주 경주, 포항, 울산에서 모임이 열립니다.                   │
│  책 한 권을 읽고, 생각을 나누고, 친구가 됩니다.               │
│                                                              │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│                    📷 이런 분위기예요                        │
│                                                              │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ [사진1] │ │ [사진2] │ │ [사진3] │ │ [사진4] │           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
│                                                              │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│                    💛 회원분들의 이야기                      │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ "처음엔 낯설었지만, 이제는 매주가 기다려져요."        │   │
│  │                               - 익명 (2024년 합류)   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ "책을 읽는 게 아니라 사람을 만나는 느낌이에요."       │   │
│  │                               - 익명 (2023년 합류)   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                              │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│                    🚀 함께해요                               │
│                                                              │
│  처음이신가요? 부담 없이 한 번 참여해보세요!                   │
│  정기모임 한 번 참여로 시작할 수 있어요.                       │
│                                                              │
│              [정기모임 신청하기]                              │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

#### SEO 최적화

```typescript
// /app/about/page.tsx
export const metadata: Metadata = {
  title: '지독해 - 책을 사랑하는 사람들이 모이는 곳',
  description: '경주, 포항, 울산에서 매주 열리는 독서 모임. 책 한 권을 읽고, 생각을 나누고, 친구가 됩니다.',
  openGraph: {
    title: '지독해 - 독서 모임',
    description: '250명의 회원이 함께하는 독서 모임',
    images: ['/og-image.png'],
  },
};
```

#### 완료 검증

- [ ] 랜딩페이지 `/about` 접속 가능
- [ ] 브랜드 스토리 섹션 표시
- [ ] 공개 동의한 후기만 표시
- [ ] CTA 버튼 클릭 시 회원가입/로그인 페이지로
- [ ] 모바일에서 UI 정상
- [ ] SEO 메타데이터 설정 (검색 노출)

#### 사용자 가치

> 🎯 **"신규 방문자가 지독해의 분위기를 느끼고 참여하고 싶어진다"**

---

### Phase 2: 신규 회원 플로우

**목표:** 신규 회원 온보딩, 첫 모임 전후 알림

**예상 소요:** 2~3일

#### 작업 목록

| # | 작업 | 산출물 | 완료 기준 |
|---|------|--------|----------|
| 2.1 | 신규 회원 판별 로직 | is_new_member 체크 | 첫 정기모임 참여 전 |
| 2.2 | 일정 클릭 시 안내 팝업 | 모달 컴포넌트 | 신규 회원만 표시 |
| 2.3 | 팝업 선택지 | UI | 후킹페이지/바로신청 |
| 2.4 | "다시 보지 않기" 옵션 | 로컬스토리지 | 팝업 숨김 |
| 2.5 | 첫 모임 전날 환영 알림 | 알림 템플릿 | 장소/준비물 안내 |
| 2.6 | 환영 알림 Cron 추가 | `/app/api/cron/welcome/route.ts` | 신규 회원 + 모임 D-1 필터 |
| 2.7 | 첫 모임 후 알림 템플릿 | 알림 템플릿 | 후기 요청 + 다음 모임 안내 |
| 2.8 | 첫 모임 후 알림 Cron | `/app/api/cron/first-meeting-followup/route.ts` | 신규→기존 전환 후 3일째 발송 |
| 2.9 | 기존 회원 전환 로직 | 트리거/API | is_new_member = false |
| 2.10 | 다음 정기모임 추천 로직 | 로직 | 첫 모임 후 알림에 포함 |

#### 첫 모임 후 알림 Cron 로직

```typescript
// /app/api/cron/first-meeting-followup/route.ts
// 매일 오전 10시 실행 (Vercel Cron)

async function getFirstMeetingFollowupTargets() {
  const today = new Date();
  const threeDaysAgo = subDays(today, 3);
  
  // 첫 정기모임 참여 완료 후 3일째인 신규→기존 전환 회원
  const { data: targets } = await supabase
    .from('users')
    .select('id, name, phone, first_regular_meeting_at')
    .eq('is_new_member', false)
    .gte('first_regular_meeting_at', startOfDay(threeDaysAgo))
    .lt('first_regular_meeting_at', endOfDay(threeDaysAgo));
  
  // 다음 정기모임 조회 (2주 이내)
  for (const user of targets) {
    const nextMeeting = await getNextRegularMeeting(user.id);
    await sendFirstMeetingFollowupNotification(user, nextMeeting);
  }
}
```

#### 알림 템플릿: 첫 모임 후 후기 요청

```
[지독해] #{회원명}님, 첫 모임은 어떠셨어요?

안녕하세요! 첫 모임에 와주셔서 감사해요 💛

#{모임명}에서 어떤 시간을 보내셨는지 궁금해요!
후기를 남겨주시면 다른 분들에게도 큰 도움이 됩니다.

[후기 남기기]

---

다음 정기모임도 함께해요!
📅 #{다음모임명}: #{다음모임일시}

[다음 모임 신청하기]
```

#### 신규 회원 안내 팝업

```
┌─────────────────────────────────────┐
│                                      │
│         👋 처음이시네요!              │
│                                      │
│ 지독해가 어떤 곳인지                  │
│ 먼저 둘러보시는 걸 추천해요.          │
│                                      │
│ ┌─────────────────────────────────┐ │
│ │    [🏠 지독해 알아보기]          │ │
│ │    분위기와 회원 후기를 먼저     │ │
│ └─────────────────────────────────┘ │
│                                      │
│ ┌─────────────────────────────────┐ │
│ │    [📝 바로 신청하기]            │ │
│ │    이미 알고 있어요!             │ │
│ └─────────────────────────────────┘ │
│                                      │
│ □ 다시 보지 않기                     │
│                                      │
└─────────────────────────────────────┘
```

#### 신규 회원 정의 & 전환

```typescript
// 신규 회원: 첫 정기모임 참여 완료 전
// 전환 조건: 첫 정기모임 participation_status = 'completed'

async function checkAndConvertNewMember(userId: string, meetingId: string) {
  const meeting = await getMeeting(meetingId);
  if (meeting.meeting_type !== 'regular') return; // 정기모임만
  
  const user = await getUser(userId);
  if (!user.is_new_member) return; // 이미 전환됨
  
  // 첫 정기모임 참여 완료 → 기존 회원 전환
  await supabase
    .from('users')
    .update({
      is_new_member: false,
      first_regular_meeting_at: new Date(),
    })
    .eq('id', userId);
}
```

#### 알림 템플릿: 첫 모임 환영

```
[지독해] #{회원명}님, 내일 첫 모임이에요!

안녕하세요! 지독해에 오신 걸 환영해요 🎉

내일 #{시간}에 #{장소}에서 만나요.

📚 준비물: #{책이름} (읽어오시면 좋아요!)
📍 장소: #{상세주소}
☕ 참가비: #{참가비}콩 (이미 결제 완료!)

처음이라 걱정되시죠?
걱정 마세요, 모두 친절하게 맞이해 드릴게요.

모임에서 만나요! 💛
```

#### 완료 검증

- [ ] 신규 회원이 일정 클릭 시 안내 팝업 표시
- [ ] 기존 회원은 팝업 없이 바로 상세 페이지
- [ ] "다시 보지 않기" 체크 시 팝업 숨김
- [ ] 첫 모임 전날 환영 알림 발송
- [ ] 첫 정기모임 참여 완료 시 is_new_member = false
- [ ] 첫 모임 참여 완료 3일 후 후기 요청 알림 발송
- [ ] 첫 모임 후 알림에 다음 정기모임 안내 포함

#### 사용자 가치

> 🎯 **"신규 회원이 첫 모임에 안심하고 참여하고, 후속 안내로 재참여가 유도된다"**

---

### Phase 3: 자격 체크 & 유도

**목표:** 정기모임 자격 미충족 시 정기모임으로 유도

**예상 소요:** 1~2일

#### 작업 목록

| # | 작업 | 산출물 | 완료 기준 |
|---|------|--------|----------|
| 3.1 | 자격 체크 함수 | `/lib/eligibility.ts` | 6개월 규정 체크 |
| 3.2 | 자격 미충족 팝업 | 모달 컴포넌트 | 토론모임 등 신청 시 |
| 3.3 | 정기모임 목록으로 유도 | 버튼 | 정기모임 필터링 |
| 3.4 | 자격 만료 임박 알림 | 알림 템플릿 | 5개월 경과 시 |
| 3.5 | 만료 임박 Cron 추가 | 기존 Cron 수정 | 대상자 필터 |
| 3.6 | 마이페이지 자격 상태 | UI 확인 | 이미 M4에서 구현 |

#### 자격 체크 함수

```typescript
// /lib/eligibility.ts
interface EligibilityResult {
  isEligible: boolean;
  lastRegularMeetingAt: Date | null;
  expiresAt: Date | null;
  daysRemaining: number | null;
  status: 'active' | 'warning' | 'expired' | 'new';
}

async function checkRegularMeetingEligibility(userId: string): Promise<EligibilityResult> {
  const user = await getUser(userId);
  
  // 신규 회원 (첫 정기모임 참여 전)
  if (user.is_new_member) {
    return { isEligible: true, status: 'new', lastRegularMeetingAt: null, expiresAt: null, daysRemaining: null };
  }
  
  const lastRegularMeetingAt = user.last_regular_meeting_at;
  
  if (!lastRegularMeetingAt) {
    return { isEligible: false, status: 'expired', lastRegularMeetingAt: null, expiresAt: null, daysRemaining: null };
  }
  
  const expiresAt = addMonths(new Date(lastRegularMeetingAt), 6);
  const now = new Date();
  const daysRemaining = differenceInDays(expiresAt, now);
  
  if (daysRemaining <= 0) {
    return { isEligible: false, status: 'expired', lastRegularMeetingAt, expiresAt, daysRemaining: 0 };
  }
  
  if (daysRemaining <= 30) {
    return { isEligible: true, status: 'warning', lastRegularMeetingAt, expiresAt, daysRemaining };
  }
  
  return { isEligible: true, status: 'active', lastRegularMeetingAt, expiresAt, daysRemaining };
}
```

#### 자격 미충족 팝업

```
┌─────────────────────────────────────┐
│                                      │
│     ⚠️ 정기모임 참여가 필요해요      │
│                                      │
│ 토론모임에 참여하려면                 │
│ 6개월 이내 정기모임 참여 기록이       │
│ 필요합니다.                          │
│                                      │
│ 마지막 정기모임: 2024년 6월 15일      │
│ 자격이 만료되었어요.                  │
│                                      │
│ 먼저 정기모임에 참여해주세요!         │
│                                      │
│ ┌─────────────────────────────────┐ │
│ │   [정기모임 보러가기]            │ │
│ └─────────────────────────────────┘ │
│                                      │
│           [닫기]                     │
│                                      │
└─────────────────────────────────────┘
```

#### 완료 검증

- [ ] 정기모임 자격 미충족 시 토론모임 신청 불가
- [ ] 자격 미충족 팝업에서 정기모임으로 유도
- [ ] 자격 만료 임박(1개월 전) 알림 발송
- [ ] 마이페이지에서 자격 상태 확인 가능

#### 사용자 가치

> 🎯 **"회원이 자격 규정을 자연스럽게 인지하고 정기모임에 참여하게 된다"**

---

### Phase 4: 안정화 & 출시

**목표:** 버그 수정, 성능 최적화, 정식 출시

**예상 소요:** 4~5일

#### 작업 목록

| # | 작업 | 산출물 | 완료 기준 |
|---|------|--------|----------|
| 4.1 | Beta 피드백 수집 | 피드백 목록 | 우선순위 정리 |
| 4.2 | 크리티컬 버그 수정 | 버그 픽스 | P0 버그 0개 |
| 4.3 | 성능 최적화 | 코드 개선 | LCP < 2.5s |
| 4.4 | 이미지 최적화 | Next.js Image | lazy loading |
| 4.5 | 에러 모니터링 설정 | Sentry 등 | 에러 추적 |
| 4.6 | 로그 정리 | 로깅 개선 | 중요 이벤트 기록 |
| 4.7 | 데이터 마이그레이션 | 스크립트 | 기존 회원 데이터 |
| 4.8 | 최종 QA | 체크리스트 | 전체 기능 검증 |
| 4.9 | 배포 준비 | 환경 설정 | production 세팅 |
| 4.10 | 정식 출시 | 공개 | 전체 회원 안내 |

#### 성능 최적화 체크리스트

- [ ] **이미지 최적화**
  - Next.js `<Image>` 컴포넌트 사용
  - 적절한 사이즈 및 포맷 (WebP)
  - lazy loading 적용

- [ ] **번들 최적화**
  - 코드 스플리팅
  - 동적 임포트
  - 불필요한 의존성 제거

- [ ] **데이터베이스 최적화**
  - 인덱스 추가 (자주 조회되는 컬럼)
  - N+1 쿼리 방지
  - 커넥션 풀링

- [ ] **API 최적화**
  - 캐싱 전략
  - 응답 시간 측정

#### 에러 모니터링 설정

```typescript
// Sentry 설정 예시
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 0.1,
});
```

#### 최종 QA 체크리스트

**인증**
- [ ] 이메일 회원가입
- [ ] 이메일 로그인
- [ ] 카카오 로그인
- [ ] 로그아웃

**모임**
- [ ] 모임 목록 조회
- [ ] 모임 상세 조회
- [ ] 모임 신청 + 결제
- [ ] 취소 + 환불
- [ ] 대기 신청

**알림**
- [ ] 모임 리마인드 (3일/1일/당일)
- [ ] 대기자 알림
- [ ] 월말 독려
- [ ] 운영자 수동 발송

**소속감**
- [ ] 참여 완료 선택
- [ ] 칭찬하기
- [ ] 후기 작성
- [ ] 배지 부여
- [ ] 책장 등록

**운영자**
- [ ] 대시보드
- [ ] 모임 관리
- [ ] 알림 템플릿
- [ ] 권한 관리
- [ ] 요청함
- [ ] 배너 관리

**신규 회원**
- [ ] 후킹 랜딩페이지
- [ ] 안내 팝업
- [ ] 환영 알림
- [ ] 자격 체크

#### 출시 안내 알림

```
[지독해] 새로운 웹서비스가 오픈했어요! 🎉

안녕하세요, #{회원명}님!

지독해의 새로운 웹서비스가 오픈했습니다!

✨ 이제 더 편하게 모임을 신청하고
✨ 취소할 때 자동으로 환불받고
✨ 알림으로 모임을 잊지 않을 수 있어요

[지금 확인하기]
```

#### 완료 검증

- [ ] 크리티컬 버그 0개
- [ ] 주요 기능 전체 정상 동작
- [ ] 성능 지표 충족 (LCP < 2.5s)
- [ ] 에러 모니터링 동작
- [ ] 기존 회원 데이터 마이그레이션 완료
- [ ] 전체 회원에게 출시 안내 발송

#### 사용자 가치

> 🎯 **"안정적이고 빠른 서비스로 전체 회원이 사용할 수 있다"**

---

## 3. M6 완료 검증 체크리스트

### 기능 검증

- [ ] 후킹 랜딩페이지 공개
- [ ] 공개 동의 후기 표시
- [ ] 신규 회원 안내 팝업 동작
- [ ] 첫 모임 전날 환영 알림 발송
- [ ] 정기모임 자격 미충족 시 유도
- [ ] 자격 만료 임박 알림 발송

### 품질 검증

- [ ] 크리티컬 버그 0개
- [ ] LCP < 2.5s
- [ ] 에러 모니터링 동작

### 출시 완료

- [ ] 전체 회원 안내 발송
- [ ] 기존 카카오톡 프로세스 → 웹 전환 안내

---

## 4. 출시 계획

### 출시 전 체크리스트

- [ ] 환경 변수 production 설정
- [ ] 도메인 연결 (필요시)
- [ ] SSL 인증서 확인
- [ ] 백업 전략 수립
- [ ] 롤백 계획 수립

### 출시 후 모니터링 (1주일)

| 항목 | 모니터링 방법 | 임계치 |
|------|-------------|--------|
| 에러율 | Sentry | < 1% |
| 응답 시간 | Vercel Analytics | < 3s |
| 결제 성공률 | 포트원 대시보드 | > 95% |
| 알림 발송률 | 솔라피 대시보드 | > 99% |

### 롤백 계획

```
문제 발생 시:
1. Vercel에서 이전 배포로 롤백 (5분)
2. 회원에게 점검 안내 발송
3. 원인 분석 및 수정
4. 재배포
```

---

## 5. 성공 지표

### 출시 시점 목표

| 지표 | 목표 |
|------|------|
| 모임 신청 완료 단계 | 2단계 (선택 → 결제) |
| 환불 처리 운영자 개입 | 0건 |
| 모임 리마인드 | 3일/1일/당일 자동 발송 |

### 출시 후 1개월 목표

| 지표 | 현재 | 목표 |
|------|------|------|
| 신규 회원 재참여율 | 50% | 70% 이상 |
| 리마인드 후 노쇼율 | - | 감소 확인 |
| 칭찬하기 참여율 | - | 측정 시작 |

---

## 6. 🎉 MVP 완성

```
┌─────────────────────────────────────────────────────────────┐
│                                                              │
│                    🎉 MVP 정식 출시 🎉                       │
│                                                              │
│  M1: 프로젝트 기반 구축 ✅                                   │
│  M2: 핵심 결제 흐름 ✅                                       │
│  M3: 알림 시스템 ✅                                          │
│  M4: 소속감 기능 ✅                                          │
│  M5: 운영자 도구 ✅                                          │
│  M6: 신규 회원 & 출시 준비 ✅                                │
│                                                              │
│  총 소요: 12~14주 (약 3~4개월)                               │
│                                                              │
│  핵심 가치 완성:                                             │
│  ✅ 쉬운 연결                                                │
│  ✅ 잊지 않게                                                │
│  ✅ 소속감                                                   │
│  ✅ 신뢰                                                     │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-01-14 | 1.0 | WP-M6 최초 작성 |
| 2026-01-14 | 1.1 | Phase 2에 첫 모임 후 알림 Cron 로직 상세화 및 다음 모임 추천 추가 |

